<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>All Question Stems</title>
  <style>
    body { font-family: Arial, sans-serif; margin:20px; line-height:1.5; }
    h1 { margin-bottom: 20px; }
    .question {
      margin-bottom: 15px;
      padding:8px;
      border-bottom: 1px solid #ddd;
    }
    .id { color: #555; font-size: 0.9em; margin-bottom: 3px; }
    .stem { font-weight: bold; }
  </style>
</head>
<body>
  <h1>All Question Stems</h1>
  <div id="stemList">Loadingâ€¦</div>

  <script>
    let edits = JSON.parse(localStorage.getItem('edits') || '{}');
    let added = JSON.parse(localStorage.getItem('added_questions') || '[]');

    fetch('questions_parsed_full_v2.json')
      .then(r => r.json())
      .then(data => {
        let questions = data;

        // merge added
        if(Array.isArray(added)) {
          const existingIds = new Set(questions.map(q => q.id));
          const filtered = added.filter(q => !existingIds.has(q.id));
          questions = questions.concat(filtered);
        }

        const container = document.getElementById('stemList');
        container.innerHTML = "";

        questions.forEach(q => {
          if(edits[q.id]) Object.assign(q, edits[q.id]);

          const div = document.createElement('div');
          div.className = 'question';
          div.innerHTML = `
            <div class="id">${q.id}</div>
            <div class="stem">${q.stem}</div>
          `;
          container.appendChild(div);
        });
      });
  </script>
</body>
</html>
